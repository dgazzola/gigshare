<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>gigshare</title>
  <script defer src="/dist/bundle.js"></script></head>

  <body>
    <div id="app"></div>
    <noscript>
      You need to enable JavaScript to run this app.
    </noscript>
    <script>
      initMap = function() {};

      fetch('/api/v1/getApiKey')
        .then(response => response.json())
        .then(data => {
          if (data.apiKey) {
            const script = document.createElement('script');
            script.src = `https://maps.googleapis.com/maps/api/js?key=${data.apiKey}&callback=initMap`;
            script.async = true;
            document.body.appendChild(script);
          } else {
            console.error('Failed to fetch the API key');
          }
        })
        .catch(error => {
          console.error('Error fetching API key:', error);
        });
    </script>
    <script src="/dist/bundle.js"></script>
  </body>
</html>
